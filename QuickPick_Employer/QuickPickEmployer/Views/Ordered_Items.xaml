<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="QuickPick_Employer.QuickPickEmployer.Views.Ordered_Items"
             xmlns:mvvm="clr-namespace:QuickPick_Employer.QuickPickEmployer.ViewModel"
             xmlns:vm="clr-namespace:QuickPick_Employer.QuickPickEmployer.Models"
             Title="Ordered_Items" x:DataType="mvvm:TransactionListViewModel"
             BackgroundColor="WhiteSmoke" x:Name="PageRoot">
    <ScrollView>
        <StackLayout>
            <Label Text="Items that were ordered in this order" 
                   FontSize="30" FontAttributes="Bold" HorizontalOptions="Center">
                <Label.Shadow>
                    <Shadow Offset="10,10"
                            Brush="Black"
                            Opacity="0.5"
                            Radius="10"/>
                </Label.Shadow>
            </Label>
            <CollectionView ItemsSource="{Binding OrderedItems}" ItemsLayout="VerticalGrid,2">
                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="vm:BoughtItem">
                        <Border BackgroundColor="White">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="20"/>
                            </Border.StrokeShape>
                            <Border.Shadow>
                                <Shadow Offset="10,10"
                                     Brush="Black"
                                     Opacity="0.5"
                                     Radius="10"/>
                            </Border.Shadow>
                            <StackLayout Spacing="20" Padding="15" Orientation="Horizontal">
                                <Border>
                                    <Border.StrokeShape>
                                        <RoundRectangle CornerRadius="20"/>
                                    </Border.StrokeShape>
                                    <Image Source="{Binding ImageSourceUrl}" HeightRequest="200" Aspect="AspectFill"/>
                                </Border>
                                <StackLayout Spacing="10">
                                    <Label Text="{Binding ItemName}" FontSize="24" FontAttributes="Bold"/>
                                    <Label Text="{Binding Quantity,StringFormat='Total bought for this item is : {0}'}" FontSize="18"/>
                                    <HorizontalStackLayout Spacing="10">
                                        <Border WidthRequest="150">
                                            <Border.StrokeShape>
                                                <RoundRectangle CornerRadius="25"/>
                                            </Border.StrokeShape>
                                            <Border.Shadow>
                                                <Shadow Brush="Black"
                                                        Opacity="0.5"
                                                        Radius="10"
                                                        Offset="10,10" />
                                            </Border.Shadow>
                                            <Button TextColor="White" BackgroundColor="LimeGreen" Text="Refund" FontAttributes="Bold" FontSize="20" WidthRequest="150" HorizontalOptions="Center"
                                                    Command="{Binding BindingContext.RefundItemsCommand, Source={x:Reference PageRoot}}" CommandParameter="{Binding .}"/>

                                        </Border>
                                        <Border WidthRequest="190">
                                            <Border.StrokeShape>
                                                <RoundRectangle CornerRadius="25"/>
                                            </Border.StrokeShape>
                                            <Border.Shadow>
                                                <Shadow Brush="Black"
                                                     Opacity="0.5"
                                                     Radius="10"
                                                     Offset="10,10" />
                                            </Border.Shadow>
                                            <Button TextColor="White" BackgroundColor="LimeGreen" Text="View Transaction" FontAttributes="Bold" FontSize="20" WidthRequest="190" HorizontalOptions="Center"
                                                    Command="{Binding BindingContext.ViewItemTransactionCommand, Source={x:Reference PageRoot}}" CommandParameter="{Binding .}"/>

                                        </Border>
                                    </HorizontalStackLayout>
                                </StackLayout>
                            </StackLayout>
                        </Border>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </StackLayout>
    </ScrollView>
</ContentPage>