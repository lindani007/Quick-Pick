<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="QuickPick_Employer.QuickPickEmployer.Views.ItemsPage"
             xmlns:mvvm="clr-namespace:QuickPick_Employer.QuickPickEmployer.ViewModel"
             xmlns:vm ="clr-namespace:QuickPick_Employer.QuickPickEmployer.Models"
             x:DataType="mvvm:ItemViewModel"
             Title="Items" x:Name="PageRoot"
             BackgroundColor="WhiteSmoke">
    <ScrollView>
        <StackLayout Spacing="20" Padding="15">
            <Label Text="Items" FontSize="40" FontAttributes="Bold" HorizontalOptions="Center">
                <Label.Shadow>
                    <Shadow Brush="Black"
             Opacity="0.5"
             Radius="10"
             Offset="10,10" />
                </Label.Shadow>
            </Label>
            <Border WidthRequest="450" HorizontalOptions="Center" BackgroundColor="White">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="20"/>
                </Border.StrokeShape>
                <Border.Shadow>
                    <Shadow Brush="Black"
                     Opacity="0.5"
                     Radius="10"
                     Offset="10,10"/>
                </Border.Shadow>
                <Entry Placeholder="Search Item" FontSize="30" HorizontalOptions="Center"
                    WidthRequest="450" Text="{Binding SearchItem}" HorizontalTextAlignment="Center"/>
            </Border>
            <HorizontalStackLayout Spacing="10">
                <Label Text="Do not see item you are looking for?" FontSize="20"/>
                <Label Text="Add it." TextColor="Blue" FontSize="20">
                    <Label.GestureRecognizers>
                        <TapGestureRecognizer Command="{Binding GoAddItemsCommand}"/>
                    </Label.GestureRecognizers>
                </Label>
            </HorizontalStackLayout>
            <Label Text="Select An Item You Want To Add/ Edit or Delete" FontSize="30" HorizontalOptions="Center">
                <Label.Shadow>
                    <Shadow Brush="Black"
                      Opacity="0.5"
                      Radius="10"
                      Offset="10,10" />
                </Label.Shadow>
            </Label>
            <Label Text="{Binding EmptyItems}" FontSize="18" VerticalOptions="Center" HorizontalOptions="Center"/>
            <CollectionView ItemsLayout="VerticalGrid,2"
                         ItemsSource="{Binding ItemCollection}">
                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="vm:Item">
                        <Border BackgroundColor="White" WidthRequest="620">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="25"/>
                            </Border.StrokeShape>
                            <Border.Shadow>
                                <Shadow Brush="Black"
                             Opacity="0.5"
                             Radius="10"
                             Offset="10,10" />
                            </Border.Shadow>
                            <StackLayout Spacing="5" Padding="15" Orientation="Horizontal">
                                <Border StrokeThickness="0">
                                    <Border.StrokeShape>
                                        <RoundRectangle CornerRadius="20"/>
                                    </Border.StrokeShape>
                                    <Image Source="{Binding ImageSource}" HeightRequest="150" WidthRequest="250" Aspect="AspectFill"/>
                                </Border>
                                <StackLayout VerticalOptions="Center" WidthRequest="130">
                                    <Label Text="{Binding ItemName}" FontSize="24" FontAttributes="Bold"/>
                                    <Label Text="{Binding ItemDescription}" FontSize="18"/>
                                    <HorizontalStackLayout>
                                        <Label Text="R" FontSize="18"/>
                                        <Label Text="{Binding ItemPrice}" FontSize="18"/>
                                    </HorizontalStackLayout>
                                </StackLayout>
                                <StackLayout Spacing="10" Padding="10" VerticalOptions="End">
                                    <StackLayout Spacing="2" VerticalOptions="End" Orientation="Horizontal">
                                        <Button TextColor="White" BackgroundColor="#66BB6A" Text="Change" FontAttributes="Bold" 
                                                 WidthRequest="120" Command="{Binding BindingContext.ChangeItemCommand, Source={x:Reference PageRoot}}"
                                                 VerticalOptions="End" FontSize="15" CommandParameter="{Binding .}"/>
                                        <Button TextColor="White" BackgroundColor="#66BB6A" Text="Delete" FontAttributes="Bold"
                                                WidthRequest="80" Command="{Binding BindingContext.DeleteItemCommand, Source={x:Reference PageRoot}}"
                                                VerticalOptions="End" FontSize="15" CommandParameter="{Binding .}"/>
                                    </StackLayout>
                                    <Button TextColor="White" BackgroundColor="#66BB6A" Text="Add" FontAttributes="Bold" 
                                             WidthRequest="200" Command="{Binding BindingContext.AddNewItemCommand, Source={x:Reference PageRoot}}"
                                             VerticalOptions="End" FontSize="15" CommandParameter="{Binding .}"/>
                                </StackLayout>
                            </StackLayout>
                        </Border>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </StackLayout>
    </ScrollView>
</ContentPage>