<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="QuickPick_Employye_Packing.QuickPick_Empleyee_Packing_Folder.Views.PackingPage"
             xmlns:mvvm="clr-namespace:QuickPick_Employye_Packing.QuickPick_Empleyee_Packing_Folder.ViewModels"
             xmlns:vm="clr-namespace:QuickPick_Employye_Packing.QuickPick_Empleyee_Packing_Folder.Models"
             Title="PackingPage" BackgroundColor="WhiteSmoke"
             x:DataType="mvvm:OrdersViewModel" x:Name="PageRoot">
    <ScrollView>
        <StackLayout Spacing="20" Padding="15">
            <Label Text="Pack Customers Items"
                   FontSize="Header" FontAttributes="Bold" HorizontalOptions="Center">
                <Label.Shadow>
                    <Shadow Brush="Black"
                Opacity="0.5"
                Offset="10,10"
                Radius="10"/>
                </Label.Shadow>
            </Label>
            <Label Text="{Binding TotalItems, StringFormat='Total Items To Pack: {0}'}"
                   FontSize="Subtitle" FontAttributes="Bold" HorizontalOptions="Center">
                <Label.Shadow>
                    <Shadow Brush="Black"
                Opacity="0.5"
                Offset="10,10"
                Radius="10"/>
                </Label.Shadow>
            </Label>
            <Label Text="Note: Select item if you have packed it, if you haven't please do not select it" 
           FontSize="30" TextColor="Red" HorizontalOptions="Center">
                <Label.Shadow>
                    <Shadow Brush="Black"
                Opacity="0.5"
                Offset="10,10"
                Radius="10"/>
                </Label.Shadow>
            </Label>
            <Border StrokeThickness="0">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="20"/>
                </Border.StrokeShape>
                <Border.Shadow>
                    <Shadow Opacity="0.5"
                 Brush="Black"
                 Offset="10,10"
                 Radius="10"/>
                </Border.Shadow>
                <CollectionView ItemsSource="{Binding ItemsToBePacked}" ItemsLayout="VerticalGrid,5"
                                SelectedItem="{Binding SelectedOrderItem}" 
                                SelectionChangedCommand="{Binding GetSelectedItemCommand}" SelectionMode="Single">
                    <CollectionView.ItemTemplate>
                        <DataTemplate x:DataType="vm:OrderedItems">
                            <StackLayout Spacing="20">
                                <Border  BackgroundColor="White">
                                    <Border.StrokeShape>
                                        <RoundRectangle CornerRadius="20"/>
                                    </Border.StrokeShape>
                                    <Border.Shadow>
                                        <Shadow Opacity="0.5"
                                              Brush="Black"
                                              Offset="10,10"
                                              Radius="10"/>
                                    </Border.Shadow>
                                    <StackLayout Orientation="Horizontal" Spacing="20">
                                        <Image Source="{Binding ImageSourceUrl}"
                                                WidthRequest="100"
                                                VerticalOptions="Center"/>
                                        <StackLayout>
                                            <Label Text="{Binding ItemName}"
                                                     FontSize="20" FontAttributes="Bold"/>
                                            <Label Text="{Binding Quantity, StringFormat='Quantity x{0}'}"
                                                     FontSize="18"/>
                                            <Label Text="{Binding Price, StringFormat='Price: R {0:N2}'}"
                                                    FontSize="18"/>
                                        </StackLayout>
                                    </StackLayout>
                                </Border>
                            </StackLayout>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </Border>
            <Border WidthRequest="400">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="25"/>
                </Border.StrokeShape>
                <Border.Shadow>
                    <Shadow Brush="Black"
             Opacity="0.5"
             Radius="10"
             Offset="10,10" />
                </Border.Shadow>
                <Button TextColor="White" BackgroundColor="#66BB6A" Text="Done Packing" FontAttributes="Bold" FontSize="30" WidthRequest="400" HorizontalOptions="Center"
            Command="{Binding DonePackingCommand}"/>

            </Border>
        </StackLayout>
    </ScrollView>
</ContentPage>